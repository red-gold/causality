!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@tensorflow/tfjs"),require("ramda"),require("levelup")):"function"==typeof define&&define.amd?define(["@tensorflow/tfjs","ramda","levelup"],t):"object"==typeof exports?exports["@causalNet/core"]=t(require("@tensorflow/tfjs"),require("ramda"),require("levelup")):e["@causalNet/core"]=t(e["@tensorflow/tfjs"],e.ramda,e.levelup)}(this,function(e,t,r){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(t,r){t.exports=e},function(e,t,r){"use strict";var n,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function u(){u.init.call(this)}e.exports=u,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var f=10;function c(e){return void 0===e._maxListeners?u.defaultMaxListeners:e._maxListeners}function a(e,t,r,n){var o,i,s,u;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),s=i[t]),void 0===s)s=i[t]=r,++e._eventsCount;else if("function"==typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(o=c(e))>0&&s.length>o&&!s.warned){s.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=e,f.type=t,f.count=s.length,u=f,console&&console.warn&&console.warn(u)}return e}function l(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,i(this.listener,this.target,e))}.bind(n);return o.listener=r,n.wrapFn=o,o}function p(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):v(o,o.length)}function h(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function v(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");f=e}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},u.prototype.getMaxListeners=function(){return c(this)},u.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var f=o[e];if(void 0===f)return!1;if("function"==typeof f)i(f,this,t);else{var c=f.length,a=v(f,c);for(r=0;r<c;++r)i(a[r],this,t)}return!0},u.prototype.addListener=function(e,t){return a(this,e,t,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(e,t){return a(this,e,t,!0)},u.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,l(this,e,t)),this},u.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,l(this,e,t)),this},u.prototype.removeListener=function(e,t){var r,n,o,i,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},u.prototype.listeners=function(e){return p(this,e,!0)},u.prototype.rawListeners=function(e){return p(this,e,!1)},u.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},u.prototype.listenerCount=h,u.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t,r){"use strict";r.r(t);class n{constructor(){this.T=r(0),r(0),r(0)}get CoreTensor(){return this.T}isTensor(e){return e instanceof this.T.Tensor}}var o=class{constructor(){this.R=r(2),this.logger=console}get CoreFunctor(){return this.R}getIn(e,t,r){return this.R.pathOr(r,e,t)}setIn(e,t,r){return this.R.assocPath(e,t,r)}zip(...e){return this.R.zip(...e)}unzip(e){return this.R.reduce((e,[t,r])=>(e[0]=[...e[0],t],e[1]=[...e[1],r],e),[[],[]],e)}range(e,t=0){return this.R.range(t,e)}enumerate(e){const t=this.R;return t.addIndex(t.map)((e,t)=>[t,e])(e)}};class i{constructor(){this.levelup=r(3),this.logger=console}async connect(){throw Error("implement required")}async getItem(e,t=!1,r=!1){if(!this.store)throw Error("store is not connect");return new Promise((n,o)=>{this.store.get(e,{asBuffer:t},(t,i)=>{t?r?n({[e]:null}):(this.logger.debug({key:e,err:t}),o("error read")):n({[e]:i})})})}async setItem(e,t,r=!1){if(!this.store)throw Error("store is not connect");return new Promise((n,o)=>{this.store.put(e,t,i=>{i?r?n({[e]:null}):(this.logger.debug({key:e,err:i}),o("error write")):n({[e]:t})})})}async delItem(e,t=!1){if(!this.store)throw Error("store is not connect");return new Promise((r,n)=>{this.store.del(e,o=>{o?t?r(null):(this.logger.debug(o),n(`error delete ${e}`)):r(e)})})}makeCheckItemNameFn(e){var t=new RegExp(`${e}.*`,"g");return e=>e.match(t)||[]}async getItemList(e,t=!1){if(!this.store)throw Error("store is not connect");const r=this.makeCheckItemNameFn(e);return new Promise((n,o)=>{let i=[];this.store.createKeyStream().on("data",e=>{e=e.toString("utf8"),1===r(e).length&&i.push(e)}).on("close",()=>n(i)).on("end",()=>n(i)).on("error",r=>{t?n(i):(this.logger.debug(r),o(`error getItemList ${e}`))})})}}var s=r(1);class u extends s.EventEmitter{constructor(){super()}async emit(e,t){return new Promise((r,n)=>{super.emit(e,t,e=>{r(e)})})}on(e,t,r=!1){const n=r?t:(e,r)=>{r(t(e))};super.on(e,n)}pipe(e){let t=e.eventNames();for(let r of t)this.on(r,async(t,n)=>{n(await e.emit(r,t))},!0)}}var f=new class{constructor(){}get CoreFunctor(){return this.F=new o,this.F.CoreFunctor}get CoreTensor(){return this.T=new n,this.T.CoreTensor}};r.d(t,"Tensor",function(){return n}),r.d(t,"Functor",function(){return o}),r.d(t,"Store",function(){return i}),r.d(t,"Event",function(){return u}),r.d(t,"causalNetCore",function(){return f})}])});
//# sourceMappingURL=core.web.js.map